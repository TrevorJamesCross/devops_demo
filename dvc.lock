schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/preproc_data.py
    deps:
    - path: data/raw/ts_data.csv
      hash: md5
      md5: f81119c62ae1fdd909752fded3a6b563
      size: 54216
    - path: src/data/preproc_data.py
      hash: md5
      md5: 1c781a89916936feaaea27802685eb8b
      size: 1783
    params:
      params.yaml:
        preprocess.num_lagged_features: 1
    outs:
    - path: data/preprocessed/ts_data_monthly.csv
      hash: md5
      md5: 0786baa569854384236a19e19a7c67cf
      size: 2728
      cloud:
        gcp_bucket:
          etag: 089acee487cbd583031001
          version_id: '1704984726546202'
    - path: data/preprocessed/ts_data_monthly.csv.mlem
      hash: md5
      md5: 2a5e44504a906e9ea1a3daaffa75aac7
      size: 391
  visualize:
    cmd: python src/viz/visualize.py
    deps:
    - path: data/preprocessed/ts_data_monthly.csv
      hash: md5
      md5: 0786baa569854384236a19e19a7c67cf
      size: 2728
    - path: data/raw/ts_data.csv
      hash: md5
      md5: f81119c62ae1fdd909752fded3a6b563
      size: 54216
    - path: src/viz/visualize.py
      hash: md5
      md5: 0d0dc3078e68c9631533dc2c6668f924
      size: 2177
    params:
      params.yaml:
        visualize.differencing_param: 1
        visualize.num_lags_to_plot: 25
    outs:
    - path: reports/figures/daily_acf.png
      hash: md5
      md5: 293e77f673cf75e65cedfd8c64f448e4
      size: 72332
    - path: reports/figures/daily_timeseries.png
      hash: md5
      md5: 0f03ad3141c03bfc800d61fc1ad83a37
      size: 306787
    - path: reports/figures/monthly_acf.png
      hash: md5
      md5: d825bd9f1b6cffe145798a073dd818da
      size: 76879
    - path: reports/figures/monthly_timeseries.png
      hash: md5
      md5: 111ec26440b91012ace6297ae87c4696
      size: 177132
  train_model:
    cmd: python src/models/train_model.py
    deps:
    - path: data/preprocessed/ts_data_monthly.csv
      hash: md5
      md5: 0786baa569854384236a19e19a7c67cf
      size: 2728
    - path: src/models/train_model.py
      hash: md5
      md5: b7aa38e76a07dc6372dc887b92e818ff
      size: 3842
    params:
      params.yaml:
        train_model.forecast_size: 1
        train_model.model_fit_intercept: true
        train_model.model_force_positive_coeffs: false
        train_model.num_splits: 10
    outs:
    - path: models/lr_model
      hash: md5
      md5: 483782e62a9ebabc1e14a08d072e22d7
      size: 581
      cloud:
        gcp_bucket:
          etag: 08d7afd687cbd583031001
          version_id: '1704984726312919'
    - path: models/metrics.json
      hash: md5
      md5: a5d940bfb0e8b8df63c2625680f850ac
      size: 128
    - path: reports/figures/validation_forecasts.png
      hash: md5
      md5: 4b2bdccfc51ab3313f6c84457ed13097
      size: 128552
